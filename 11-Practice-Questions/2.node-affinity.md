✅ Question 1 — Hard Node Affinity (Required Rule)

Task:
Label the node node1 with disktype=ssd, and create a Pod named webpod that must run only on nodes with label disktype=ssd. Use image nginx.

Expected Steps (in exam):

```bash
kubectl label node node1 disktype=ssd
```
Create YAML (webpod.yaml):
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: webpod
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: disktype
            operator: In
            values:
            - ssd
  containers:
  - name: web
    image: nginx
```

Apply:

```bash
kubectl apply -f webpod.yaml
```
Result: Pod only schedules on node1. If no such node exists → Pod stays Pending.

✅ Question 2 — Soft Rule (Preferred Node Affinity)

Task:
Create a Pod auditpod that prefers nodes with label tier=backend (but can run anywhere if not available). Image: busybox, command: sleep 3600.

Answer:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: auditpod
spec:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 1
        preference:
          matchExpressions:
          - key: tier
            operator: In
            values:
            - backend
  containers:
  - name: bb
    image: busybox
    command: ["sleep", "3600"]
```

Result: Schedules on tier=backend node if available. Otherwise runs anywhere.

✅ Question 3 — NotIn Operator

Task:
Create a Pod nologspod that must not run on nodes with label tier=frontend. Use image nginx.

Answer:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nologspod
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: tier
            operator: NotIn
            values:
            - frontend
  containers:
  - name: nginx
    image: nginx
```

Result: Pod schedules anywhere except frontend nodes.

✅ Question 4 — Node Affinity + kubectl describe check

Task:
A Pod api-pod is stuck in Pending. Check and report whether the cause is Node Affinity.

Answer Steps:
```bash
kubectl describe pod api-pod
```

Look under:
Events

Warning: 0/3 nodes are available
node(s) didn't match node affinity
Result: You confirm Node Affinity is preventing scheduling.

✅ Question 5 — Add Node Affinity to Existing Deployment

Task:
Edit Deployment payments to require that all Pods run on nodes with label zone=us-east1.

Answer Commands:
```bash
kubectl label node node2 zone=us-east1   # if needed
kubectl edit deployment payments
```

Add under spec.template.spec:

```yaml
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: zone
          operator: In
          values:
          - us-east1
```

Result: After save, Deployment will reschedule Pods to matching nodes.